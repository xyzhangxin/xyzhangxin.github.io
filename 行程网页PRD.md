# PRD V1.1｜旅行助手网页（时间线版）

## 1. 目标与范围

- **目标**：基于“时间线版行程”，生成一个在旅途中可随时查看、一键操作的智能化攻略网页。
- **核心价值**：在一个页面内，高效完成“看行程、找住宿、查待办、去导航、叫打车、做记录”的核心旅行动作。
- **项目范围**：
  - **前端实现**：一个纯前端响应式网页，可通过PWA技术实现离线访问与桌面快捷方式。
  - **数据来源**：静态数据，来源于`250830张家界7天6晚行程-时间线版.md`转换的结构化JSON。
- **新增范围**：
  - **Header“Home”按钮**：一键展示当天住宿地址与快捷动作（复制地址/高德导航/滴滴打车）。
  - **Header“待办清单”按钮**：弹窗展示全量待办事项（可勾选完成），包含“高铁票开售时间/购票入口、景区票、包车、机票值机”等，并能提供关键日期提醒。
- **非目标**：在线购票/下单、账号体系、多人实时协作。

## 2. 用户场景与用户故事

- **场景A（当天总览）**：打开页面，自动定位到“今天”的行程，时间线高亮“当前时段”，一键可导航或打车。
- **场景B（临近交通）**：出发前60分钟，自动展开对应的“车票/航班卡片”，候车/值机信息一目了然。
- **场景C（住宿直达）**：晚上回酒店，点击“Home”按钮即刻看到当天住宿地址，直接调用导航或打车。
- **场景D（行前准备）**：出发前，点击“待办清单”，清晰看到所有待办事项（如购票、值机）与完成状态；临近购票/值机，页面有提醒，并可一键跳转官方入口。
- **场景E（摄影灵感）**：到达某景点，时间线上的摄影卡片（样片+要点）提供即时拍摄指导。

## 3. 信息架构与导航

- **顶部悬浮（Header）**：
  - 左侧：**日期选择器**（默认“今天”），**“回到当前”**按钮。
  - 右侧：**Home按钮**，**待办清单按钮**。
  - 可选：城市/天气信息。
- **主体内容**：
  - 按天分节（Day1-Day7），每节都是一条独立的纵向时间线。
  - 时间线节点按“开始时间”排序，类型清晰（交通/用餐/游玩/摄影/提醒）。
  - 关键交通（火车/飞机）采用可折叠/展开的**交通卡片**。
- **全局弹窗**：
  - **Home弹窗**：展示当日住宿卡片（名称/地址/电话/快捷动作）。
  - **待办清单弹窗**：可勾选的清单列表，支持分组、持久化存储。

## 4. 关键功能与验收标准

### 4.1 智能时间线与定位
- **标准**：
  - 自动识别本地日期与时间，默认跳转至当天。
  - 页面滚动时，高亮当前时间线节点。
  - 若开启定位权限，可显示距下一地点的预估距离（可选）。

### 4.2 一键唤起地图与打车
- **标准**：
  - 每个含地址的节点，均提供“导航”和“打车”按钮。
  - **导航**：优先唤起高德地图App；失败则回退至高德地图网页版。
  - **打车**：优先唤起滴滴出行App；失败则回退至滴滴出行H5页面。
  - **验收**：点击按钮能成功打开对应App或网页，并传入正确的目的地信息。

### 4.3 交互式交通卡片
- **标准**：
  - **两种形态**：折叠态（显示核心信息）、展开态（显示座位/站台/票号等全部信息）。
  - **自动展开**：当系统时间进入“出发前60分钟～到达后15分钟”区间内，对应卡片自动展开并滚动到视口。
  - **已购票**：对于已购买的车票/机票，应醒目地展示票号、座位/舱位、检票口/值机柜台等关键信息。

### 4.4 Home按钮与住宿弹窗
- **标准**：
  - 入口在Header右侧，图标清晰。
  - 点击后，弹窗展示**当天**的住宿信息（名称、地址、电话）。
  - 提供“复制地址”、“高德导航”、“滴滴打车”三个快捷按钮，功能同4.2。
  - 若当日无住宿（如最后一天），按钮置灰或弹窗提示。

### 4.5 待办清单与智能提醒
- **标准**：
  - 入口在Header右侧，可带角标提示未完成数量。
  - **弹窗内容**：分组展示所有待办事项，条目前有复选框，勾选状态通过`localStorage`持久化。
  - **高铁票务**：
    - 根据行程日期，自动计算并显示**开售日期**和**站点起售时间**。
    - 提供“去12306购票”的链接，直达官网或App。
  - **机票值机**：
    - 根据航班时间，自动计算并显示**值机开始时间**。
    - 提供“去东航值机”的链接。
  - **验收**：清单条目完整生成；勾选状态可保存刷新；高铁/机票时间计算准确；链接可正确跳转。

## 5. 数据模型（要求）

### 5.1 行程数据 (`days`)
- `day.date` (YYYY-MM-DD), `day.title` (string), `day.accommodation` (object)。
- `day.accommodation`: `{ name, address, lat?, lng?, tel? }`。
- `item.time` (HH:mm), `item.type` (transport/meal/poi/photo/note), `item.title` (string)。
- `item.address`: `{ name, lat?, lng? }`。
- `item.actions`: 数组，如`["amap", "didi", "copy"]`。
- `item.card` (交通节点): 
  - `train`: `{ trainNo, depart: {time, station}, arrive: {time, station}, seats: ["15车17ABC", "15车18ABC"], gate: "2B", platform? }`。
  - `flight`: `{ flightNo, depart: {time, airport}, arrive: {time, airport}, terminal?, gate?, pnr? }`。

### 5.2 待办清单数据 (`todos`)
- `group.id` (trainTickets, scenicTickets, etc.), `group.title` (string)。
- `item.id` (string), `item.title` (string), `item.desc` (string, 可选), `item.link` (URL, 可选), `item.done` (boolean)。
- `trainTickets.item` 需含特殊字段: `{ departDate, saleDate, saleTime, stationName }`。
- `flightCheckin.item` 需含特殊字段: `{ flightDate, checkinTime }`。

## 6. 待办清单内容（根据行程预生成）

### **交通 - 高铁票 (预售期15天)**
- **G355 (苏州北→怀化南)** (已购)
  - 乘车日期: `8月30日`
  - 座位号: `15车17ABC, 18ABC`
  - 检票口: `2B`
- **G6370 (怀化南→凤凰古城)** (已购)
  - 乘车日期: `8月30日`
  - 座位号: `16车ABCD, 15车DF`
  - 检票口: `1`
- **高铁 (凤凰古城→张家界西)**
  - 乘车日期: `9月1日`
  - **开售时间: `8月18日 10:00`**
  - 入口: `12306官网/APP`
- **C7741 (张家界西→长沙)**
  - 乘车日期: `9月4日`
  - **开售时间: `8月21日 16:00`**
  - 入口: `12306官网/APP`

### **交通 - 机票值机**
- **MU2742 (长沙→无锡)**
  - 航班日期: `9月5日 18:35`
  - **值机开放: `9月3日 18:35`** (起飞前48小时)
  - 入口: `东方航空官网/APP`

### **门票预订**
- `凤凰古城套票` (含沱江泛舟)
- `张家界国家森林公园门票`
- `百龙天梯`
- `天子山索道`
- `十里画廊小火车`
- `天门山门票 (A线)`
- `《魅力湘西》演出票`

### **包车与住宿**
- **Day 6 包车**: 武陵源→天门山→张家界西站 (需确认司机/电话/车牌)
- **Day 7 包车**: 长沙市区及送机 (需确认司机/电话/车牌)
- **Day 6 住宿**: 长沙市区酒店 (待预定)

### **行前准备**
- 身份证、驾驶证等个人证件
- 少量现金
- 充电宝、数据线
- 雨披、防滑鞋
- 防晒霜、太阳镜
- 常用药品、创可贴、晕车药
- 儿童专用物品（零食、玩具、药品）

## 7. DeepLink规范
- **高德地图 (导航)**: `https://uri.amap.com/navigation?to={lng},{lat},{name}&mode=car`
- **滴滴出行 (打车)**: `https://common.diditaxi.com.cn/general/webEntry` (H5兜底页，后续可研究传入目的地参数)
- **12306**: `https://www.12306.cn`

## 8. 待补清单 (需要您确认后填入)
- **所有地点的精确经纬度 (lng, lat)**：
  - 苏州/张家界/长沙的各交通枢纽
  - 两个民宿和长沙酒店的地址
  - 各景区入口/核心景点
- **火车票/机票的详细信息**：座位号、车厢号、检票口、PNR等。（G355已更新）
- **包车司机的联系信息**：姓名、电话、车牌号。 